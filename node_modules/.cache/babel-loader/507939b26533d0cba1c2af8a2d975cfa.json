{"ast":null,"code":"import _classCallCheck from\"/Users/markbryginskij/Desktop/Yandex.Projects/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markbryginskij/Desktop/Yandex.Projects/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._baseUrl=options.baseUrl;this._headers=options.headers;}_createClass(Api,[{key:\"handleOriginalResponse\",value:function handleOriginalResponse(res){if(res.ok){return res.json();}return Promise.reject(\"Error : \".concat(res.status));}},{key:\"getInitialCards\",value:function getInitialCards(){var _this=this;return fetch(this._baseUrl+\"/cards\",{method:\"GET\",headers:this._headers}).then(function(res){return _this.handleOriginalResponse(res);});}},{key:\"getUserInfo\",value:function getUserInfo(){var _this2=this;return fetch(this._baseUrl+\"/users/me\",{method:\"GET\",headers:this._headers}).then(function(res){return _this2.handleOriginalResponse(res);});}},{key:\"setUserInfo\",value:function setUserInfo(userInfo){var _this3=this;return fetch(this._baseUrl+\"/users/me\",{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:userInfo.name,about:userInfo.about})}).then(function(res){return _this3.handleOriginalResponse(res);});}},{key:\"setUserAvatar\",value:function setUserAvatar(userInfo){var _this4=this;return fetch(this._baseUrl+\"/users/me/avatar\",{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:userInfo.avatar})}).then(function(res){return _this4.handleOriginalResponse(res);});}},{key:\"addCard\",value:function addCard(newCard){var _this5=this;return fetch(this._baseUrl+\"/cards\",{method:\"POST\",headers:this._headers,body:JSON.stringify({name:newCard.name,link:newCard.link})}).then(function(res){return _this5.handleOriginalResponse(res);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this6=this;return fetch(this._baseUrl+\"/cards/\"+cardId,{method:\"DELETE\",headers:this._headers}).then(function(res){return _this6.handleOriginalResponse(res);});}},{key:\"addCardLike\",value:function addCardLike(cardId){var _this7=this;return fetch(this._baseUrl+\"/cards/likes/\"+cardId,{method:\"PUT\",headers:this._headers}).then(function(res){return _this7.handleOriginalResponse(res);});}},{key:\"removeCardLike\",value:function removeCardLike(cardId){var _this8=this;return fetch(this._baseUrl+\"/cards/likes/\"+cardId,{method:\"DELETE\",headers:this._headers}).then(function(res){return _this8.handleOriginalResponse(res);});}}]);return Api;}();var appApi=new Api({baseUrl:\"https://mesto.nomoreparties.co/v1/cohort-14\",headers:{authorization:\"aa78f1a9-4e3b-428a-a9f7-5265cbc9b3da\",\"Content-Type\":\"application/json\"}});export default appApi;","map":{"version":3,"sources":["/Users/markbryginskij/Desktop/Yandex.Projects/mesto-react/src/utils/Api.js"],"names":["Api","options","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","handleOriginalResponse","userInfo","body","JSON","stringify","name","about","avatar","newCard","link","cardId","appApi","authorization"],"mappings":"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","sourcesContent":["class Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  handleOriginalResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error : ${res.status}`);\n  }\n\n  getInitialCards() {\n    return fetch(this._baseUrl + \"/cards\", {\n      method: \"GET\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  getUserInfo() {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"GET\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  setUserInfo(userInfo) {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: userInfo.name,\n        about: userInfo.about,\n      }),\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  setUserAvatar(userInfo) {\n    return fetch(this._baseUrl + \"/users/me/avatar\", {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: userInfo.avatar,\n      }),\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  addCard(newCard) {\n    return fetch(this._baseUrl + \"/cards\", {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: newCard.name,\n        link: newCard.link,\n      }),\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  deleteCard(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  addCardLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/likes/\" + cardId, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  removeCardLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/likes/\" + cardId, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n}\n\nconst appApi = new Api({\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-14\",\n  headers: {\n    authorization: \"aa78f1a9-4e3b-428a-a9f7-5265cbc9b3da\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default appApi;\n\n"]},"metadata":{},"sourceType":"module"}
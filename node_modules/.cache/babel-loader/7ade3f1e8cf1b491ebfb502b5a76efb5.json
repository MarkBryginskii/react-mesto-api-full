{"ast":null,"code":"import _toConsumableArray from\"/Users/markbryginskij/Desktop/Yandex.Projects/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/markbryginskij/Desktop/Yandex.Projects/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import logo from\"./images/header-logo.svg\";import Header from'./Header.js';import Main from'./Main.js';import Footer from'./Footer.js';import ImagePopup from'./ImagePopup';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup';import appApi from'../utils/Api.js';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';var App=function App(){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),currentUser=_React$useState2[0],setCurrentUser=_React$useState2[1];React.useEffect(function(){appApi.getUserInfo().then(function(userData){setCurrentUser(userData);});},[]);var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditAvatarPopupOpen=_React$useState4[0],setIsEditAvatarPopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditProfilePopupOpen=_React$useState6[0],setIsEditProfilePopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isAddPlacePopupOpen=_React$useState8[0],setIsAddPlacePopupOpen=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isImagePopupOpen=_React$useState10[0],setIsImagePopupOpen=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];var handleCardLike=function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});(isLiked?appApi.removeCardLike(card._id):appApi.addCardLike(card._id)).then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);});};var handleCardDelete=function handleCardDelete(card){appApi.deleteCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);});};React.useEffect(function(){appApi.getInitialCards().then(function(cards){setCards(cards);});},[]);var _React$useState13=React.useState(),_React$useState14=_slicedToArray(_React$useState13,2),selectedCard=_React$useState14[0],setSelectedCard=_React$useState14[1];var handleEditAvatarClick=function handleEditAvatarClick(){setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);};var handleEditProfileClick=function handleEditProfileClick(){setIsEditProfilePopupOpen(!isEditProfilePopupOpen);};var handleAddPlaceClick=function handleAddPlaceClick(){setIsAddPlacePopupOpen(!isAddPlacePopupOpen);};var handleCardClick=function handleCardClick(card){setSelectedCard(card);};var closeAllPopups=function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsImagePopupOpen(false);setSelectedCard(null);};var handleUpdateUser=function handleUpdateUser(_ref){var name=_ref.name,about=_ref.about;appApi.setUserInfo({name:name,about:about}).then(function(userData){console.log(userData);setCurrentUser(userData);});closeAllPopups();};var handleUpdateAvatar=function handleUpdateAvatar(_ref2){var avatar=_ref2.avatar;appApi.setUserAvatar({avatar:avatar}).then(function(userData){setCurrentUser(userData);});closeAllPopups();};var handleAddPlaceSubmit=function handleAddPlaceSubmit(_ref3){var name=_ref3.name,link=_ref3.link;appApi.addCard({name:name,link:link}).then(function(newCard){setCards([].concat(_toConsumableArray(cards),[newCard]));});closeAllPopups();};return/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},/*#__PURE__*/React.createElement(\"div\",{className:\"root\"},/*#__PURE__*/React.createElement(Header,{logo:logo}),/*#__PURE__*/React.createElement(Main,{onEditAvatarClick:handleEditAvatarClick,onEditProfileClick:handleEditProfileClick,onAddPlaceClick:handleAddPlaceClick,cards:cards,onCardClick:handleCardClick,onCardLikeClick:handleCardLike,onCardDeleteClick:handleCardDelete}),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/React.createElement(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/React.createElement(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddCard:handleAddPlaceSubmit}),/*#__PURE__*/React.createElement(ImagePopup,{card:selectedCard,isOpen:isImagePopupOpen,onClose:closeAllPopups})));};export default App;","map":{"version":3,"sources":["/Users/markbryginskij/Desktop/Yandex.Projects/mesto-react/src/components/App.js"],"names":["React","Header","Main","Footer","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","appApi","CurrentUserContext","App","useState","currentUser","setCurrentUser","useEffect","getUserInfo","then","userData","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isImagePopupOpen","setIsImagePopupOpen","cards","setCards","handleCardLike","card","isLiked","likes","some","i","_id","removeCardLike","addCardLike","newCard","newCards","map","c","handleCardDelete","deleteCard","filter","getInitialCards","selectedCard","setSelectedCard","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","closeAllPopups","handleUpdateUser","name","about","setUserInfo","console","log","handleUpdateAvatar","avatar","setUserAvatar","handleAddPlaceSubmit","link","addCard","logo"],"mappings":"wWAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,2CAEA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,WAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CAEA,MAAOC,CAAAA,gBAAP,KAA6B,uBAA7B,CACA,MAAOC,CAAAA,eAAP,KAA4B,sBAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CAEA,OAAQC,kBAAR,KAAiC,mCAAjC,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,qBAEsBV,KAAK,CAACW,QAAN,CAAe,EAAf,CAFtB,oDAETC,WAFS,qBAEIC,cAFJ,qBAIhBb,KAAK,CAACc,SAAN,CAAiB,UAAM,CACrBN,MAAM,CAACO,WAAP,GACCC,IADD,CACM,SAACC,QAAD,CAAc,CAChBJ,cAAc,CAACI,QAAD,CAAd,CACD,CAHH,EAIC,CALH,CAKK,EALL,EAJgB,qBAW0CjB,KAAK,CAACW,QAAN,CAAe,KAAf,CAX1C,qDAWTO,qBAXS,qBAWcC,wBAXd,0CAY4CnB,KAAK,CAACW,QAAN,CAAe,KAAf,CAZ5C,qDAYTS,sBAZS,qBAYeC,yBAZf,0CAasCrB,KAAK,CAACW,QAAN,CAAe,KAAf,CAbtC,qDAaTW,mBAbS,qBAaYC,sBAbZ,0CAcgCvB,KAAK,CAACW,QAAN,CAAe,KAAf,CAdhC,sDAcTa,gBAdS,sBAcSC,mBAdT,4CAgBUzB,KAAK,CAACW,QAAN,CAAe,EAAf,CAhBV,uDAgBTe,KAhBS,sBAgBFC,QAhBE,sBAkBhB,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,IAAD,CAAU,CAC/B,GAAMC,CAAAA,OAAO,CAAGD,IAAI,CAACE,KAAL,CAAWC,IAAX,CAAgB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,GAAF,GAAUtB,WAAW,CAACsB,GAA1B,EAAjB,CAAhB,CAEA,CAACJ,OAAO,CAAGtB,MAAM,CAAC2B,cAAP,CAAsBN,IAAI,CAACK,GAA3B,CAAH,CAAqC1B,MAAM,CAAC4B,WAAP,CAAmBP,IAAI,CAACK,GAAxB,CAA7C,EACClB,IADD,CACM,SAACqB,OAAD,CAAa,CACjB,GAAMC,CAAAA,QAAQ,CAAGZ,KAAK,CAACa,GAAN,CAAU,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACN,GAAF,GAAUL,IAAI,CAACK,GAAf,CAAqBG,OAArB,CAA+BG,CAAtC,EAAV,CAAjB,CACAb,QAAQ,CAACW,QAAD,CAAR,CACD,CAJD,EAKD,CARD,CAUA,GAAMG,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACZ,IAAD,CAAU,CACjCrB,MAAM,CAACkC,UAAP,CAAkBb,IAAI,CAACK,GAAvB,EACClB,IADD,CACM,UAAM,CACV,GAAMsB,CAAAA,QAAQ,CAAGZ,KAAK,CAACiB,MAAN,CAAa,SAACH,CAAD,QAAOA,CAAAA,CAAC,CAACN,GAAF,GAAUL,IAAI,CAACK,GAAtB,EAAb,CAAjB,CACAP,QAAQ,CAACW,QAAD,CAAR,CACD,CAJD,EAKD,CAND,CAQAtC,KAAK,CAACc,SAAN,CAAiB,UAAM,CACrBN,MAAM,CAACoC,eAAP,GACC5B,IADD,CACM,SAACU,KAAD,CAAW,CACfC,QAAQ,CAACD,KAAD,CAAR,CACC,CAHH,EAIC,CALH,CAKK,EALL,EApCgB,sBA2CwB1B,KAAK,CAACW,QAAN,EA3CxB,uDA2CTkC,YA3CS,sBA2CKC,eA3CL,sBA6ChB,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,EAAM,CAClC5B,wBAAwB,CAAC,CAACD,qBAAF,CAAxB,CACD,CAFD,CAIA,GAAM8B,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,EAAM,CACnC3B,yBAAyB,CAAC,CAACD,sBAAF,CAAzB,CACD,CAFD,CAIA,GAAM6B,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChC1B,sBAAsB,CAAC,CAACD,mBAAF,CAAtB,CACD,CAFD,CAIA,GAAM4B,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACrB,IAAD,CAAU,CAChCiB,eAAe,CAACjB,IAAD,CAAf,CACD,CAFD,CAIA,GAAMsB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BhC,wBAAwB,CAAC,KAAD,CAAxB,CACAE,yBAAyB,CAAC,KAAD,CAAzB,CACAE,sBAAsB,CAAC,KAAD,CAAtB,CACAE,mBAAmB,CAAC,KAAD,CAAnB,CACAqB,eAAe,CAAC,IAAD,CAAf,CACD,CAND,CAQA,GAAMM,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAmB,IAAjBC,CAAAA,IAAiB,MAAjBA,IAAiB,CAAXC,KAAW,MAAXA,KAAW,CAC1C9C,MAAM,CAAC+C,WAAP,CAAmB,CAACF,IAAI,CAAJA,IAAD,CAAOC,KAAK,CAALA,KAAP,CAAnB,EACCtC,IADD,CACM,SAACC,QAAD,CAAc,CAClBuC,OAAO,CAACC,GAAR,CAAYxC,QAAZ,EACAJ,cAAc,CAACI,QAAD,CAAd,CAA0B,CAH5B,EAIAkC,cAAc,GACf,CAND,CAQA,GAAMO,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,OAAc,IAAZC,CAAAA,MAAY,OAAZA,MAAY,CACvCnD,MAAM,CAACoD,aAAP,CAAqB,CAACD,MAAM,CAANA,MAAD,CAArB,EACC3C,IADD,CACM,SAACC,QAAD,CAAc,CAClBJ,cAAc,CAACI,QAAD,CAAd,CAA0B,CAF5B,EAGAkC,cAAc,GACf,CALD,CAOA,GAAMU,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,OAAkB,IAAhBR,CAAAA,IAAgB,OAAhBA,IAAgB,CAAVS,IAAU,OAAVA,IAAU,CAC7CtD,MAAM,CAACuD,OAAP,CAAe,CAACV,IAAI,CAAJA,IAAD,CAAOS,IAAI,CAAJA,IAAP,CAAf,EACC9C,IADD,CACM,SAACqB,OAAD,CAAa,CACjBV,QAAQ,8BAAKD,KAAL,GAAYW,OAAZ,GAAR,CACD,CAHD,EAIAc,cAAc,GACf,CAND,CAQA,mBACE,oBAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAEvC,WAApC,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,oBAAC,MAAD,EAAQ,IAAI,CAAEoD,IAAd,EADF,cAEE,oBAAC,IAAD,EACE,iBAAiB,CAAEjB,qBADrB,CAEE,kBAAkB,CAAEC,sBAFtB,CAGE,eAAe,CAAEC,mBAHnB,CAIE,KAAK,CAAEvB,KAJT,CAKE,WAAW,CAAEwB,eALf,CAME,eAAe,CAAEtB,cANnB,CAOE,iBAAiB,CAAEa,gBAPrB,EAFF,cAWE,oBAAC,MAAD,MAXF,cAYE,oBAAC,eAAD,EAAiB,MAAM,CAAEvB,qBAAzB,CAAgD,OAAO,CAAEiC,cAAzD,CAAyE,cAAc,CAAEO,kBAAzF,EAZF,cAaE,oBAAC,gBAAD,EAAkB,MAAM,CAAEtC,sBAA1B,CAAkD,OAAO,CAAE+B,cAA3D,CAA2E,YAAY,CAAEC,gBAAzF,EAbF,cAcE,oBAAC,aAAD,EAAe,MAAM,CAAE9B,mBAAvB,CAA4C,OAAO,CAAE6B,cAArD,CAAqE,SAAS,CAAEU,oBAAhF,EAdF,cAeE,oBAAC,UAAD,EAAY,IAAI,CAAEhB,YAAlB,CAAgC,MAAM,CAAErB,gBAAxC,CAA0D,OAAO,CAAE2B,cAAnE,EAfF,CADF,CADF,CAqBD,CAjHD,CAmHA,cAAezC,CAAAA,GAAf","sourcesContent":["import React from 'react';\nimport logo from './images/header-logo.svg';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport ImagePopup from './ImagePopup';\n\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup';\n\nimport appApi from '../utils/Api.js';\n\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nconst App = () => {\n\n  const [currentUser, setCurrentUser] = React.useState('');\n\n  React.useEffect( () => {\n    appApi.getUserInfo()\n    .then((userData) => {\n        setCurrentUser(userData);\n      });\n    }, []);\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n  const [cards, setCards] = React.useState([]);\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    (isLiked ? appApi.removeCardLike(card._id) : appApi.addCardLike(card._id))\n    .then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    });\n  }\n\n  const handleCardDelete = (card) => {\n    appApi.deleteCard(card._id)\n    .then(() => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    });\n  }\n\n  React.useEffect( () => {\n    appApi.getInitialCards()\n    .then((cards) => {\n      setCards(cards);\n      });\n    }, []);\n\n  const [selectedCard, setSelectedCard] = React.useState();\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  const handleUpdateUser = ({name, about}) => {\n    appApi.setUserInfo({name, about})\n    .then((userData) => {\n      console.log(userData);\n      setCurrentUser(userData);});\n    closeAllPopups();\n  }\n\n  const handleUpdateAvatar = ({avatar}) => {\n    appApi.setUserAvatar({avatar})\n    .then((userData) => {\n      setCurrentUser(userData);});\n    closeAllPopups();\n  }\n\n  const handleAddPlaceSubmit = ({name, link}) => {\n    appApi.addCard({name, link})\n    .then((newCard) => {\n      setCards([...cards, newCard]);\n    });\n    closeAllPopups();\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\">\n        <Header logo={logo} />\n        <Main\n          onEditAvatarClick={handleEditAvatarClick}\n          onEditProfileClick={handleEditProfileClick}\n          onAddPlaceClick={handleAddPlaceClick}\n          cards={cards}\n          onCardClick={handleCardClick}\n          onCardLikeClick={handleCardLike}\n          onCardDeleteClick={handleCardDelete}\n        />\n        <Footer />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddCard={handleAddPlaceSubmit}/>\n        <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={closeAllPopups} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}